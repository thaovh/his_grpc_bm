syntax = "proto3";

package machine;

import "google/protobuf/empty.proto";

service MachineService {
    rpc findAllMachines (Query) returns (MachineList) {}
    rpc findMachineById (Id) returns (Machine) {}
    rpc findMachineByCode (Name) returns (Machine) {}
    rpc countMachines (Query) returns (Count) {}
    rpc createMachine (CreateMachineInput) returns (Machine) {}
    rpc updateMachine (UpdateMachineInput) returns (Machine) {}
    rpc destroyMachine (Query) returns (Count) {}

    // Maintenance
    rpc findAllMaintenanceRecords (Query) returns (MaintenanceRecordList) {}
    rpc findMaintenanceRecordById (Id) returns (MaintenanceRecord) {}
    rpc countMaintenanceRecords (Query) returns (Count) {}
    rpc createMaintenanceRecord (CreateMaintenanceRecordInput) returns (MaintenanceRecord) {}
    rpc updateMaintenanceRecord (UpdateMaintenanceRecordInput) returns (MaintenanceRecord) {}
    rpc destroyMaintenanceRecord (Query) returns (Count) {}

    // Documents
    rpc findAllMachineDocuments (Query) returns (MachineDocumentList) {}
    rpc findMachineDocumentById (Id) returns (MachineDocument) {}
    rpc countMachineDocuments (Query) returns (Count) {}
    rpc createMachineDocument (CreateMachineDocumentInput) returns (MachineDocument) {}
    rpc updateMachineDocument (UpdateMachineDocumentInput) returns (MachineDocument) {}
    rpc destroyMachineDocument (Query) returns (Count) {}

    // Transfers
    rpc findAllTransfers (Query) returns (TransferList) {}
    rpc findTransferById (Id) returns (Transfer) {}
    rpc countTransfers (Query) returns (Count) {}
    rpc createTransfer (CreateTransferInput) returns (Transfer) {}
    rpc updateTransfer (UpdateTransferInput) returns (Transfer) {}
    rpc destroyTransfer (Query) returns (Count) {}
}

message Query {
    string where = 1;
    string order = 2;
    int32 limit = 3;
    int32 offset = 4;
    string include = 5;
}

message Id {
    string id = 1;
}

message Name {
    string name = 1;
}

message Count {
    int32 count = 1;
}

message Machine {
    string id = 1;
    string code = 2;
    string name = 3;
    string categoryId = 4;
    string statusId = 5;
    string unitId = 6;
    string vendorId = 7;
    string manufacturerCountryId = 8;
    string fundingSourceId = 9;
    string serialNumber = 10;
    string model = 11;
    int32 manufacturingYear = 12;
    string purchaseDate = 13;
    string warrantyExpirationDate = 14;
    string description = 15;
    string createdAt = 16;
    string updatedAt = 17;
    string createdBy = 18;
    string updatedBy = 19;
    int32 version = 20;
    int32 isActive = 21;
    string branchId = 22;
    string departmentId = 23;
    repeated MachineDocument documents = 24;
    string manufacturerId = 25;
    string managementDepartmentId = 26;
}

message MachineList {
    repeated Machine data = 1;
}

message CreateMachineInput {
    string code = 1;
    string name = 2;
    string categoryId = 3;
    string statusId = 4;
    string unitId = 5;
    string vendorId = 6;
    string manufacturerCountryId = 7;
    string manufacturerId = 20;
    string fundingSourceId = 8;
    string serialNumber = 9;
    string model = 10;
    int32 manufacturingYear = 11;
    string purchaseDate = 12;
    string warrantyExpirationDate = 13;
    string description = 14;
    string branchId = 15;
    string departmentId = 16;
    string transferDate = 17;
    string transferTypeId = 18;
    string managementDepartmentId = 21;
    string createdBy = 19;
}

message UpdateMachineInput {
    string id = 1;
    string code = 2;
    string name = 3;
    string categoryId = 4;
    string statusId = 5;
    string unitId = 6;
    string vendorId = 7;
    string manufacturerCountryId = 8;
    string manufacturerId = 20;
    string fundingSourceId = 9;
    string serialNumber = 10;
    string model = 11;
    int32 manufacturingYear = 12;
    string purchaseDate = 13;
    string warrantyExpirationDate = 14;
    string description = 15;
    string managementDepartmentId = 17;
    string updatedBy = 16;
}

message MaintenanceRecord {
    string id = 1;
    string machineId = 2;
    string maintenanceTypeId = 3;
    string date = 4;
    string performer = 5;
    string description = 6;
    double cost = 7;
    string nextMaintenanceDate = 8;
    string createdAt = 9;
    string updatedAt = 10;
    string createdBy = 11;
    string updatedBy = 12;
    int32 version = 13;
    int32 isActive = 14;
}

message MaintenanceRecordList {
    repeated MaintenanceRecord data = 1;
}

message CreateMaintenanceRecordInput {
    string machineId = 1;
    string maintenanceTypeId = 2;
    string date = 3;
    string performer = 4;
    string description = 5;
    double cost = 6;
    string nextMaintenanceDate = 7;
    string createdBy = 8;
}

message UpdateMaintenanceRecordInput {
    string id = 1;
    string machineId = 2;
    string maintenanceTypeId = 3;
    string date = 4;
    string performer = 5;
    string description = 6;
    double cost = 7;
    string nextMaintenanceDate = 8;
    string updatedBy = 9;
}

message MachineDocument {
    string id = 1;
    string machineId = 2;
    string type = 3;
    string fileName = 4;
    string fileUrl = 5;
    string description = 6;
    string createdAt = 7;
    string updatedAt = 8;
    string createdBy = 9;
    string updatedBy = 10;
    int32 version = 11;
    int32 isActive = 12;
}

message MachineDocumentList {
    repeated MachineDocument data = 1;
}

message CreateMachineDocumentInput {
    string machineId = 1;
    string type = 2;
    string fileName = 3;
    string fileUrl = 4;
    string description = 5;
    string createdBy = 6;
}

message UpdateMachineDocumentInput {
    string id = 1;
    string machineId = 2;
    string type = 3;
    string fileName = 4;
    string fileUrl = 5;
    string description = 6;
    string updatedBy = 7;
}

message Transfer {
    string id = 1;
    string machineId = 2;
    string fromBranchId = 3;
    string toBranchId = 4;
    string fromDepartmentId = 5;
    string toDepartmentId = 6;
    string transferDate = 7;
    string statusId = 8;
    string transferTypeId = 9;
    string reason = 10;
    string referenceNumber = 11;
    string createdAt = 12;
    string updatedAt = 13;
    string createdBy = 14;
    string updatedBy = 15;
    int32 version = 16;
    int32 isActive = 17;
}

message TransferList {
    repeated Transfer data = 1;
}

message CreateTransferInput {
    string machineId = 1;
    string fromBranchId = 2;
    string toBranchId = 3;
    string fromDepartmentId = 4;
    string toDepartmentId = 5;
    string transferDate = 6;
    string statusId = 7;
    string transferTypeId = 8;
    string reason = 9;
    string referenceNumber = 10;
    string createdBy = 11;
}

message UpdateTransferInput {
    string id = 1;
    string statusId = 2;
    string reason = 3;
    string referenceNumber = 4;
    string updatedBy = 5;
}
