syntax = "proto3";

package users;

import "./commons.proto";
import "users/user.proto";
import "users/profile.proto";
import "users/role.proto";
import "users/device-token.proto";

service UsersService {
  rpc findAll (commons.Query) returns (UserList) {}
  rpc findById (commons.Id) returns (User) {}
  rpc findByUsername (commons.Name) returns (User) {}
  rpc findByEmail (commons.Name) returns (User) {}
  rpc findByAcsId (commons.Id) returns (User) {}
  rpc getUserInfoWithProfile (commons.Id) returns (UserWithProfile) {}
  rpc count (commons.Query) returns (commons.Count) {}
  rpc create (CreateUserInput) returns (User) {}
  rpc update (UpdateUserInput) returns (User) {}
  rpc updateProfile (UpdateUserProfileInput) returns (UserProfile) {}
  rpc updatePassword (UpdatePasswordInput) returns (User) {}
  rpc destroy (commons.Id) returns (commons.Count) {}
  
  // Device Token Management
  rpc SaveDeviceToken (SaveDeviceTokenRequest) returns (SaveDeviceTokenResponse) {}
  rpc RemoveDeviceToken (RemoveDeviceTokenRequest) returns (RemoveDeviceTokenResponse) {}
  rpc GetDeviceTokens (GetDeviceTokensRequest) returns (GetDeviceTokensResponse) {}

  // Role Management
  rpc CreateRole (Role) returns (Role) {}
  rpc UpdateRole (Role) returns (Role) {}
  rpc DeleteRole (commons.Id) returns (commons.Count) {}
  rpc GetRoles (commons.Query) returns (RoleList) {}
  rpc GetRoleById (commons.Id) returns (Role) {}
  rpc GetRoleByCode (commons.Name) returns (Role) {}
  
  // User Role Assignment
  rpc AssignRole (UserRoleInput) returns (UserRole) {}
  rpc RevokeRole (UserRoleInput) returns (commons.Count) {}
  rpc GetUserRoles (commons.Id) returns (UserRoleList) {}
}
